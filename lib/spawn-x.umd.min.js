!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("Spawn",[],r):"object"==typeof exports?exports.Spawn=r():e.Spawn=r()}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var t={};return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=8)}([function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.error=r.hasKey=r.isString=r.isFunc=r.isArray=r.isObject=r.isPlainObject=void 0;var n=t(7);r.isPlainObject=n.isPlainObject,r.isObject=n.isObject,r.isArray=n.isArray,r.isFunc=n.isFunc,r.isString=n.isString,r.hasKey=n.hasKey,r.error=n.error},function(e,r,t){"use strict";function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.forEach(function(e){if(!(0,o.isFunc)(e))return(0,o.error)("Spawn: the addInterceptor takes only a function as arguments!")}),[].concat(r)}Object.defineProperty(r,"__esModule",{value:!0}),r.addInterceptor=void 0;var o=t(0);r.addInterceptor=n},function(e,r,t){"use strict";function n(){for(var e={},r=[],t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return 1===n.length?(0,i.isPlainObject)(n[0])?(e=n[0],new o.Spawn(e,r)):(0,i.isArray)(n[0])?(r=n[0].filter(function(e){return(0,i.isFunc)(e)}),new o.Spawn(e,r)):(0,i.error)("spawn-x: createStore with one argument takes only a plain object or addInterceptor function!"):n.length>1?(0,i.isPlainObject)(n[0])?(e=n[0],(0,i.isArray)(n[1])?(r=n[1].filter(function(e){return(0,i.isFunc)(e)}),new o.Spawn(e,r)):(0,i.error)("spawn-x: createStore with two arguments takes as second argument only addInterceptor function!")):(0,i.error)("spawn-x: createStore with two arguments takes as first argument only a plain object!"):new o.Spawn(e,r)}Object.defineProperty(r,"__esModule",{value:!0}),r.createStore=void 0;var o=t(4),i=t(0);r.createStore=n},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.INIT_ACTION={data:{},type:"@@SPAWN/INIT"}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Spawn=void 0;var n=t(6);r.Spawn=n.Spawn},function(e,r,t){"use strict";function n(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function o(e){return(0,y.isPlainObject)(e)?b({},e):(0,y.isArray)(e)?[].concat(n(e)):e}function i(e){var r=e.subscribers,t=e.subscribersArgs,o=e.action;r.forEach(function(e,r){return e.apply(void 0,n(t[r]).concat([o]))})}function a(e,r){return e.forEach(function(e){if(e===r)return!1}),!0}function s(e){var r=e.subscribers,t=e.subscribersArgs,n=e.cb;return r.forEach(function(e,o){if(e===n)return r.splice(o,1),t.splice(o,1),!0}),!1}function u(e,r){for(var t=e.split("."),n=r,o=0;o<t.length;o++){if(!n.hasOwnProperty(t[o]))return null;n=n[t[o]]}return n}function c(e,r){Object.keys(e).forEach(function(t){return i({subscribers:e[t],subscribersArgs:r[t]})})}function f(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return 0===r.length?function(e){return e}:1===r.length?r[0]:r.reduce(function(e,r){return function(){return e(r.apply(void 0,arguments))}})}function p(e){return function(r){return function(t){return f.apply(void 0,n(t.map(function(r){return r(e)})))(function(e){return e})(r)}}}function l(e){var r=e.action,t=e.zone,n=e.subscribers,o=e.subscribersArgs,a=e.afterUpdate,s=Object.keys(n).filter(function(e){return"*"!==e});s.forEach(function(e){return e===t?void i({subscribers:n[e],subscribersArgs:o[e]}):t.length<e.length&&new RegExp("^"+t+".","i").test(e)?void i({subscribers:n[e],subscribersArgs:o[e]}):t.length>e.length&&new RegExp("^"+e+".","i").test(t)?void i({subscribers:n[e],subscribersArgs:o[e]}):void 0}),a&&i({subscribers:n["*"],subscribersArgs:o["*"],action:r})}Object.defineProperty(r,"__esModule",{value:!0}),r.applyLogic=r.applyInterceptors=r.compose=r.autorun=r.findZoneValue=r.removeCallback=r.checkCallback=r.mapSubscribers=r.getImmutableCopy=void 0;var b=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},y=t(0);r.getImmutableCopy=o,r.mapSubscribers=i,r.checkCallback=a,r.removeCallback=s,r.findZoneValue=u,r.autorun=c,r.compose=f,r.applyInterceptors=p,r.applyLogic=l},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Spawn=void 0;var n=t(3),o=t(5),i=t(0),a=function(e,r){var t=this,a=e,s={"*":[]},u={"*":[]};this.select=function(e){if((0,i.isString)(e))switch(e){case"*":return(0,o.getImmutableCopy)(a);default:return(0,o.getImmutableCopy)((0,o.findZoneValue)(e,a))}return(0,i.isFunc)(e)?(0,o.getImmutableCopy)(e((0,o.getImmutableCopy)(a))):(0,i.error)("spawn-x: the select method takes only a string or function as argument!")},this.detect=function(e,r){for(var n=arguments.length,c=Array(n>2?n-2:0),f=2;f<n;f++)c[f-2]=arguments[f];return(0,i.isString)(e)?(0,i.isFunc)(r)?(s[e]||u[e]||(s[e]=[],u[e]=[]),(0,o.checkCallback)(s[e],r)?(s[e].push(r),u[e].push(c),(0,o.findZoneValue)(e,a)&&(0,o.applyLogic)({zone:e,subscribers:s,subscribersArgs:u,afterUpdate:!1}),t):t):(0,i.error)("spawn-x: the detect method takes only a function for second argument!"):(0,i.error)("spawn-x: the detect method takes only a string for first argument!")},this.reject=function(e,r){return(0,i.isString)(e)?(0,i.isFunc)(r)?(s[e]&&(0,o.removeCallback)({subscribers:s[e],subscribersArgs:u[e],cb:r}),t):(0,i.error)("spawn-x: the reject method takes only a function for second argument!"):(0,i.error)("spawn-x: the reject method takes only a string for first argument!")},this.update=function(e,n){function c(){var r=this;return function(){return function(t){var n=e.split("."),c=a;if("*"===e)return(0,i.isPlainObject)(t.data)?(a=(0,o.getImmutableCopy)(t.data),(0,o.autorun)(s,u),r):(0,i.error)("spawn-x: the update method takes only a plain object for replace full state! Check your update('*') method.");for(var f=0;f<n.length;f++){if(c.hasOwnProperty(n[f])||(c[n[f]]={}),f===n.length-1){c[n[f]]=t.data;break}c=c[n[f]]}(0,o.applyLogic)({action:(0,o.getImmutableCopy)(t),zone:e,subscribers:s,subscribersArgs:u,afterUpdate:!0})}}}return(0,i.isString)(e)?(0,i.isPlainObject)(n)?(0,i.hasKey)(n,"data")?(0,i.hasKey)(n,"type")?(0,i.isString)(n.type)?((0,o.applyInterceptors)(t)(n)(r.concat(c)),t):(0,i.error)("spawn-x: type of action must be a string!"):(0,i.error)("spawn-x: action must have a 'type' key!"):(0,i.error)("spawn-x: action must have a 'data' key!"):(0,i.error)("spawn-x: action must be a plain object!"):(0,i.error)("spawn-x: the update method takes only a string for first argument!")},(0,o.applyInterceptors)(this)(n.INIT_ACTION)(r.concat(function(e){return function(e){return function(r){return e(r)}}}))};r.Spawn=a},function(e,r,t){"use strict";function n(e){return!(!o(e)||i(e))}function o(e){return"object"===("undefined"==typeof e?"undefined":f(e))&&null!==e}function i(e){return Array.isArray(e)}function a(e){return"function"==typeof e}function s(e){return"string"==typeof e}function u(e,r){for(var t in e)if(e.hasOwnProperty(t)&&t===r)return!0;return!1}function c(e){throw new Error(e)}Object.defineProperty(r,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.isPlainObject=n,r.isObject=o,r.isArray=i,r.isFunc=a,r.isString=s,r.hasKey=u,r.error=c},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addInterceptor=r.createStore=void 0;var n=t(2),o=t(1);r.createStore=n.createStore,r.addInterceptor=o.addInterceptor}])});