!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Spawn",[],t):"object"==typeof exports?exports.Spawn=t():e.Spawn=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.error=t.hasKey=t.isString=t.isFunc=t.isArray=t.isObject=t.isPlainObject=void 0;var n=r(7);t.isPlainObject=n.isPlainObject,t.isObject=n.isObject,t.isArray=n.isArray,t.isFunc=n.isFunc,t.isString=n.isString,t.hasKey=n.hasKey,t.error=n.error},function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.forEach(function(e){if(!(0,o.isFunc)(e))return(0,o.error)("Spawn: the addInterceptor takes only a function as arguments!")}),[].concat(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.addInterceptor=void 0;var o=r(0);t.addInterceptor=n},function(e,t,r){"use strict";function n(){for(var e={},t=[],r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return 1===n.length?(0,i.isPlainObject)(n[0])?(e=n[0],new o.Spawn(e,t)):(0,i.isArray)(n[0])?(t=n[0].filter(function(e){return(0,i.isFunc)(e)}),new o.Spawn(e,t)):(0,i.error)("spawn-x: createStore with one argument takes only a plain object or addInterceptor function!"):n.length>1?(0,i.isPlainObject)(n[0])?(e=n[0],(0,i.isArray)(n[1])?(t=n[1].filter(function(e){return(0,i.isFunc)(e)}),new o.Spawn(e,t)):(0,i.error)("spawn-x: createStore with two arguments takes as second argument only addInterceptor function!")):(0,i.error)("spawn-x: createStore with two arguments takes as first argument only a plain object!"):new o.Spawn(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createStore=void 0;var o=r(4),i=r(0);t.createStore=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_ACTION={data:{},type:"@@SPAWN/INIT"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spawn=void 0;var n=r(6);t.Spawn=n.Spawn},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e){return JSON.parse(JSON.stringify(e))}function i(e){e.forEach(function(e){return e()})}function a(e,t){return e.forEach(function(e){if(e===t)return!1}),!0}function u(e,t){return e.forEach(function(r,n){if(r===t)return e.splice(n,1),!0}),!1}function c(e,t){for(var r=e.split("."),n=o(t),i=0;i<r.length;i++){if(!n.hasOwnProperty(r[i]))return null;n=n[r[i]]}return n}function s(e,t){return JSON.stringify(c(e,t))}function f(e){Object.keys(e).forEach(function(t){return i(e[t])})}function p(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function l(e){return function(t){return function(r){return p.apply(void 0,n(r.map(function(t){return t(e)})))(function(e){return e})(o(t))}}}function d(e){var t=e.zone,r=e.subscribers,n=e.state,o=e.prevState,a=e.afterUpdate;for(var u in r)if(r.hasOwnProperty(u)){if(u===t){i(r[u]);continue}if(t.length<u.length&&new RegExp("^\\"+t+".","i").test(u)&&s(u,o)!==s(u,n)){i(r[u]);continue}if(t.length>u.length&&new RegExp("^\\"+u+".","i").test(t)){i(r[u]);continue}}a&&i(r["*"])}Object.defineProperty(t,"__esModule",{value:!0}),t.clone=o,t.mapSubscribers=i,t.checkCallback=a,t.removeCallback=u,t.findZoneValue=c,t.plainZoneValue=s,t.autorun=f,t.compose=p,t.applyInterceptors=l,t.applyLogic=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spawn=void 0;var n=r(3),o=r(5),i=r(0),a=function(e,t){var r=this,a=e,u={},c={},s={"*":[]};this.select=function(e){if((0,i.isString)(e))switch(e){case"*":return(0,o.clone)(a);default:return(0,o.findZoneValue)(e,a)}return(0,i.isFunc)(e)?e((0,o.clone)(a)):(0,i.error)("spawn-x: the select method takes only a string or function as argument!")},this.detect=function(e,t){return(0,i.isString)(e)?(0,i.isFunc)(t)?(s[e]||(s[e]=[]),"*"===e&&(0,o.checkCallback)(s[e],t)?(s[e].push(t),(0,o.mapSubscribers)(s[e]),r):(0,o.checkCallback)(s[e],t)?(s[e].push(t),(0,o.findZoneValue)(e,a)&&(c=(0,o.clone)(a),(0,o.applyLogic)({zone:e,subscribers:s,state:a,prevState:u,afterUpdate:!1})),r):r):(0,i.error)("spawn-x: the detect method takes only a function for second argument!"):(0,i.error)("spawn-x: the detect method takes only a string for first argument!")},this.reject=function(e,t){return(0,i.isString)(e)?(0,i.isFunc)(t)?(s[e]&&(0,o.removeCallback)(s[e],t),r):(0,i.error)("spawn-x: the reject method takes only a function for second argument!"):(0,i.error)("spawn-x: the reject method takes only a string for first argument!")},this.update=function(e,n){function f(){var t=this;return function(){return function(r){var n=e.split("."),f=(0,o.clone)(a),p=f;if("*"===e)return(0,i.isPlainObject)(r.data)?(a=(0,o.clone)(r.data),u={},c={},(0,o.autorun)(s),t):(0,i.error)("spawn-x: the update method takes only a plain object for replace full state! Check your update('*') method.");for(var l=0;l<n.length;l++){if(f.hasOwnProperty(n[l])||(f[n[l]]={}),l===n.length-1){f[n[l]]=r.data;break}f=f[n[l]]}c=(0,o.clone)(p),(0,o.plainZoneValue)(e,a)!==(0,o.plainZoneValue)(e,c)?(a=(0,o.clone)(c),(0,o.applyLogic)({zone:e,subscribers:s,state:a,prevState:u,afterUpdate:!0}),u=(0,o.clone)(c)):(0,o.mapSubscribers)(s["*"])}}}return(0,i.isString)(e)?(0,i.isPlainObject)(n)?(0,i.hasKey)(n,"data")?(0,i.hasKey)(n,"type")?(0,i.isString)(n.type)?((0,o.applyInterceptors)(r)(n)(t.concat(f)),r):(0,i.error)("spawn-x: type of action must be a string!"):(0,i.error)("spawn-x: action must have a 'type' key!"):(0,i.error)("spawn-x: action must have a 'data' key!"):(0,i.error)("spawn-x: action must be a plain object!"):(0,i.error)("spawn-x: the update method takes only a string for first argument!")},(0,o.applyInterceptors)(this)(n.INIT_ACTION)(t.concat(function(e){return function(e){return function(t){return e(t)}}}))};t.Spawn=a},function(e,t,r){"use strict";function n(e){return!(!o(e)||i(e))}function o(e){return"object"===("undefined"==typeof e?"undefined":f(e))}function i(e){return Array.isArray(e)}function a(e){return"function"==typeof e}function u(e){return"string"==typeof e}function c(e,t){for(var r in e)if(e.hasOwnProperty(r)&&r===t)return!0;return!1}function s(e){throw new Error(e)}Object.defineProperty(t,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isPlainObject=n,t.isObject=o,t.isArray=i,t.isFunc=a,t.isString=u,t.hasKey=c,t.error=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addInterceptor=t.createStore=void 0;var n=r(2),o=r(1);t.createStore=n.createStore,t.addInterceptor=o.addInterceptor}])});