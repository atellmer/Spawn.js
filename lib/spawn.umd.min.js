!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Spawn",[],t):"object"==typeof exports?exports.Spawn=t():e.Spawn=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.error=t.hasKey=t.isString=t.isFunc=t.isArray=t.isObject=t.isPlainObject=void 0;var r=n(7);t.isPlainObject=r.isPlainObject,t.isObject=r.isObject,t.isArray=r.isArray,t.isFunc=r.isFunc,t.isString=r.isString,t.hasKey=r.hasKey,t.error=r.error},function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(function(e){if(!(0,o.isFunc)(e))return(0,o.error)("Spawn: the addInterceptor takes only a function as arguments!")}),[].concat(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.addInterceptor=void 0;var o=n(0);t.addInterceptor=r},function(e,t,n){"use strict";function r(){for(var e={},t=[],n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return 1===r.length?(0,i.isPlainObject)(r[0])?(e=r[0],new o.Spawn(e,t)):(0,i.isArray)(r[0])?(t=r[0].filter(function(e){return(0,i.isFunc)(e)}),new o.Spawn(e,t)):(0,i.error)("spawn-x: createStore with one argument takes only a plain object or addInterceptor function!"):r.length>1?(0,i.isPlainObject)(r[0])?(e=r[0],(0,i.isArray)(r[1])?(t=r[1].filter(function(e){return(0,i.isFunc)(e)}),new o.Spawn(e,t)):(0,i.error)("spawn-x: createStore with two arguments takes as second argument only addInterceptor function!")):(0,i.error)("spawn-x: createStore with two arguments takes as first argument only a plain object!"):new o.Spawn(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createStore=void 0;var o=n(4),i=n(0);t.createStore=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_ACTION={data:{},type:"@@SPAWN/INIT"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spawn=void 0;var r=n(6);t.Spawn=r.Spawn},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){return JSON.parse(JSON.stringify(e))}function i(e){e.forEach(function(e){return e()})}function a(e,t){return e.forEach(function(e){if(e===t)return!1}),!0}function u(e,t){for(var n=e.split("."),r=o(t),i=0;i<n.length;i++){if(!r.hasOwnProperty(n[i]))return null;r=r[n[i]]}return r}function c(e,t){return JSON.stringify(u(e,t))}function s(e){Object.keys(e).forEach(function(t){return i(e[t])})}function f(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function p(e){return function(t){return function(n){return f.apply(void 0,r(n.map(function(t){return t(e)})))(function(e){return e})(o(t))}}}function l(e,t,n,r,o){for(var a in t)if(t.hasOwnProperty(a)){if(a===e){i(t[a]);continue}if(e.length<a.length&&new RegExp("^\\"+e+".","i").test(a)&&c(a,r)!==c(a,n)){i(t[a]);continue}if(e.length>a.length&&new RegExp("^\\"+a+".","i").test(e)){i(t[a]);continue}}o&&i(t["*"])}Object.defineProperty(t,"__esModule",{value:!0}),t.clone=o,t.mapSubscribers=i,t.checkCallback=a,t.findZoneValue=u,t.plainZoneValue=c,t.autorun=s,t.compose=f,t.applyInterceptors=p,t.applyLogic=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spawn=void 0;var r=n(3),o=n(5),i=n(0),a=function(e,t){var n=this,a=e,u={},c={},s={"*":[]};this.select=function(e){if((0,i.isString)(e))switch(e){case"*":return(0,o.clone)(a);default:return(0,o.findZoneValue)(e,a)}return(0,i.isFunc)(e)?e((0,o.clone)(a)):(0,i.error)("spawn-x: the select method takes only a string or function as argument!")},this.detect=function(e,t){return(0,i.isString)(e)?(0,i.isFunc)(t)?(s[e]||(s[e]=[]),"*"===e&&(0,o.checkCallback)(s[e],t)?(s[e].push(t),(0,o.mapSubscribers)(s[e]),n):(0,o.checkCallback)(s[e],t)?(s[e].push(t),(0,o.findZoneValue)(e,a)&&(c=(0,o.clone)(a),(0,o.applyLogic)(e,s,a,u,!1)),n):n):(0,i.error)("spawn-x: the detect method takes only a function for second argument!"):(0,i.error)("spawn-x: the detect method takes only a string for first argument!")},this.update=function(e,r){function f(){var t=this;return function(){return function(n){var r=e.split("."),f=(0,o.clone)(a),p=f;if("*"===e)return(0,i.isPlainObject)(n.data)?(a=(0,o.clone)(n.data),u={},c={},(0,o.autorun)(s),t):(0,i.error)("spawn-x: the update method takes only a plain object for replace full state! Check your update('*') method.");for(var l=0;l<r.length;l++){if(f.hasOwnProperty(r[l])||(f[r[l]]={}),l===r.length-1){f[r[l]]=n.data;break}f=f[r[l]]}c=(0,o.clone)(p),(0,o.plainZoneValue)(e,a)!==(0,o.plainZoneValue)(e,c)?(a=(0,o.clone)(c),(0,o.applyLogic)(e,s,a,u,!0),u=(0,o.clone)(c)):(0,o.mapSubscribers)(s["*"])}}}return(0,i.isString)(e)?(0,i.isPlainObject)(r)?(0,i.hasKey)(r,"data")?(0,i.hasKey)(r,"type")?(0,i.isString)(r.type)?((0,o.applyInterceptors)(n)(r)(t.concat(f)),n):(0,i.error)("spawn-x: type of action must be a string!"):(0,i.error)("spawn-x: action must have a 'type' key!"):(0,i.error)("spawn-x: action must have a 'data' key!"):(0,i.error)("spawn-x: action must be a plain object!"):(0,i.error)("spawn-x: the update method takes only a string for first argument!")},(0,o.applyInterceptors)(this)(r.INIT_ACTION)(t.concat(function(e){return function(e){return function(t){return e(t)}}}))};t.Spawn=a},function(e,t,n){"use strict";function r(e){return!(!o(e)||i(e))}function o(e){return"object"===("undefined"==typeof e?"undefined":f(e))}function i(e){return Array.isArray(e)}function a(e){return"function"==typeof e}function u(e){return"string"==typeof e}function c(e,t){for(var n in e)if(e.hasOwnProperty(n)&&n===t)return!0;return!1}function s(e){throw new Error(e)}Object.defineProperty(t,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isPlainObject=r,t.isObject=o,t.isArray=i,t.isFunc=a,t.isString=u,t.hasKey=c,t.error=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addInterceptor=t.createStore=void 0;var r=n(2),o=n(1);t.createStore=r.createStore,t.addInterceptor=o.addInterceptor}])});