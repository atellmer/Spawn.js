var Spawn=function(){"use strict";return function(){var a={},b={},c={},d=function(){function e(a,b){var e,c=a.split("."),d=h(b);for(e=0;e<c.length;e++){if(!d.hasOwnProperty(c[e]))return!1;d=d[c[e]]}return d}function f(b){var d;for(d in c)c.hasOwnProperty(d)&&(d===b?g(d):(b.length<d.length&&null!==d.match(new RegExp("^"+b+".","i"))&&e(d,a)&&g(d),b.length>d.length&&null!==b.match(new RegExp("^"+d+".","i"))&&g(d)))}function g(a){var b;for(b=0;b<c[a].length;b++)"function"==typeof c[a][b]&&c[a][b]()}function h(a){return JSON.parse(JSON.stringify(a))}var d=this;arguments[0]&&"object"==typeof arguments[0]&&(a=arguments[0]),Spawn=function(){return d},d.getState=function(){return JSON.parse(JSON.stringify(a))},d.detect=function(g,i){return"function"!=typeof i?(console.warn("Detect method takes only a function!"),d):(c[g]||(c[g]=[]),c[g].push(i),e(g,a)&&(b=h(a),f(g)),d)},d.update=function(c,g){var m,i=c.split("."),j=h(a),k=j;for(m=0;m<i.length;m++){if(j.hasOwnProperty(i[m])||(j[i[m]]={}),m===i.length-1){j[i[m]]=g;break}j=j[i[m]]}return b=h(k),JSON.stringify(e(c,a))!==JSON.stringify(e(c,b))&&(a=h(k),f(c)),d}};return d}()}();